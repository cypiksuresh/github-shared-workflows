name: Slack Notifier
description: Alerts to a Slack channel. Create your webhook on our [Slack Bot here](https://api.slack.com/apps/A04U1JJRPT9/incoming-webhooks). Add the webhook as a secret in your repository with the key `SLACK_WEBHOOK`.
author: https://github.com/marketplace/actions/slack-notify

on:
  workflow_dispatch:  # This allows you to manually trigger the workflow from the GitHub Actions UI

jobs:
  slack-notifier:
    runs-on: ubuntu-latest
    steps:
      # Success Notification
      - name: Notify on success
        if: success()  # This condition ensures the notification is sent only on success
        uses: cypiksuresh/shared-workflows/.github/actions/automation-slack-notifier@master
        with:
          SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK_URL }}  # Fetch the webhook URL from secrets
          slack_message: |
            The workflow ran successfully! ðŸŽ‰
            - Repository: ${{ github.repository }}
            - Author: ${{ github.actor }}
            - Commit: ${{ github.sha }}
            - Commit Message: ${{ github.event.head_commit.message }}
            - Workflow: ${{ github.workflow }}
            - Job Status: Success
            - Event: ${{ github.event_name }}
            - Ref: ${{ github.ref }}

      # Failure Notification
      - name: Notify on failure
        if: failure()  # This condition ensures the notification is sent only on failure
        uses: cypiksuresh/shared-workflows/.github/actions/automation-slack-notifier@master
        with:
          SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK_URL }}  # Fetch the webhook URL from secrets
          slack_message: |
            Hmm, something went wrong. ðŸ˜ž
            - Repository: ${{ github.repository }}
            - Author: ${{ github.actor }}
            - Commit: ${{ github.sha }}
            - Commit Message: ${{ github.event.head_commit.message }}
            - Workflow: ${{ github.workflow }}
            - Job Status: Failure
            - Error: ${{ job.status }}
            - Event: ${{ github.event_name }}
            - Ref: ${{ github.ref }}
